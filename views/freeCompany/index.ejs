<div ng-controller="FreeCompanyCtrl" ng-init="initListMode(<%= freeCompanies %>)" flex>

    <div layout="row" layout-margin>
        <md-whiteframe class="md-whiteframe-z1" flex>
            <md-toolbar class="md-accent">
                <span class="md-toolbar-tools">Rechercher</span>
            </md-toolbar>
            <md-content class="md-padding">
                <md-input-container class="md-accent">
                    <label>Recherche par nom</label>
                    <input ng-model="searchString" />
                </md-input-container>
            </md-content>
        </md-whiteframe>
    </div>

    <div layout="row" layout-margin>
        <md-whiteframe class="md-whiteframe-z1" flex>
            <md-toolbar class="md-accent">
                <span class="md-toolbar-tools">Liste des compagnies</span>
            </md-toolbar>
            <md-content>
                <md-list layout="column">
                    <md-list-item ng-click="to('/free-company/show/' + fc._id)" ng-repeat="fc in results = (freeCompanies | filter:searchString)" layout="row">
                        <img class="company-logo" src="/images/fcicons/{{fc.icon}}" />
                        <span class="company-tag">[{{fc.tag}}]</span>
                        <span class="company-name" flex>{{fc.name}} <span class="company-server">(sur {{fc.server}})</span></span>
                        <span class="company-size">{{fc.realPlayersCount}} joueur<span ng-show="fc.realPlayersCount > 1">s</span></span>
                        <md-divider ng-if="!$last"></md-divider>
                    </md-list-item>
                </md-list>
                <p ng-hide="results.length">Aucune compagnie n'a été trouvée.</p>
            </md-content>
        </md-whiteframe>
    </div>
</div>